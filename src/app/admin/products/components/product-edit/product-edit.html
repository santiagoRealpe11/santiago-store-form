<form [formGroup]="form" (ngSubmit)="saveProduct($event)" class="product-edit-form">
  <mat-card appearance="outlined">
    <mat-card-header>
      <mat-card-title>‚úèÔ∏è Editar Producto</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- T√≠tulo -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>T√≠tulo</mat-label>
          <input matInput placeholder="Ingrese t√≠tulo" formControlName="title" type="text" />
          @if (form.get('title')?.touched && form.get('title')?.invalid) { @if
          (form.get('title')?.hasError('required')) {
          <mat-error>El t√≠tulo es requerido</mat-error>
          } }
        </mat-form-field>
      </div>

      <!-- Precio -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Precio</mat-label>
          <input matInput placeholder="Ingrese precio" formControlName="price" type="number" />
          <mat-hint align="end">M√°ximo: 10000</mat-hint>
          @if (priceField?.touched && priceField?.invalid) { @if
          (priceField?.hasError('price_invalid')) {
          <mat-error>No te debes pasar de 10000</mat-error>
          } @if (priceField?.hasError('required')) {
          <mat-error>El precio es requerido</mat-error>
          } }
        </mat-form-field>
      </div>

      <!-- Descripci√≥n -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Descripci√≥n</mat-label>
          <textarea
            matInput
            placeholder="Escribe aqu√≠"
            formControlName="description"
            rows="4"
          ></textarea>
          @if (form.get('description')?.touched && form.get('description')?.invalid) { @if
          (form.get('description')?.hasError('required')) {
          <mat-error>La descripci√≥n es requerida</mat-error>
          } }
        </mat-form-field>
      </div>

      <!-- Categor√≠a -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Categor√≠a</mat-label>
          <mat-select formControlName="categoryId">
            @for (category of categories; track category.id) {
            <mat-option [value]="category.id">
              {{ category.name }}
            </mat-option>
            }
          </mat-select>
          @if (form.get('categoryId')?.touched && form.get('categoryId')?.invalid) {
          <mat-error>La categor√≠a es requerida</mat-error>
          }
        </mat-form-field>
      </div>

    </mat-card-content>

    <mat-card-actions align="end">
      <button [disabled]="form.invalid" mat-raised-button color="primary" type="submit">
        üíæ Guardar cambios
      </button>
      <button mat-button color="warn" type="button" (click)="router.navigate(['./admin/products'])">
        ‚ùå Cancelar
      </button>
    </mat-card-actions>
  </mat-card>
</form>
